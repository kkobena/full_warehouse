<div>
    <div class=" master">
        <h5 id="jhi-sales-heading"><span>Liste des produits</span>
            <span class="ml-lg-5 badge badge-pill badge-info">Stock :<span
                class="badge badge-light ml-lg-5">   {{produitSelected?.totalQuantity}}</span></span>
        </h5>
        <div class="row mb-1">
            <div class="col-6 mb-1">
                <ng-select id="produitBox" autofocus="true" #produitbox [items]="produits" bindLabel="libelle"
                           placeholder="Sélectionner un produit"
                           [(ngModel)]="produitSelected" [searchable]="true"
                           (keyup)="searchFn($event)"
                           [searchFn]="produitComponentSearch"
                           (change)="onSelect(produitbox)"
                >

                    <ng-template ng-option-tmp let-item="item" let-index="index">
                        <div *ngIf="item.totalQuantity>0">
                        <span style="width:20%; display:inline-block">{{item.codeCip}}</span><span> {{item.libelle}}</span>    <span class="float-right">{{item.regularUnitPrice |number}}</span>
                        </div>
                        <div *ngIf="item.totalQuantity<=0">
                            <span class="stockless" style="width:20%; display:inline-block">{{item.codeCip}}</span><span class="stockless"> {{item.libelle}}</span>    <span class="float-right stockless">{{item.regularUnitPrice |number}}</span>
                        </div>
                    </ng-template>


                </ng-select>
            </div>
            <div class="col-4 mb-1 form-group row">
                <label class="col-form-label col-sm-3">Motifs:</label>
                <div class="col-sm-9">
                    <ng-select autofocus="true" #motif [items]="motifs" bindLabel="libelle"
                               placeholder="Sélectionner un motif"
                               [(ngModel)]="motifSelected" [searchable]="false"
                               (keyup)="searchMotif($event)"
                               (change)="onSelectMotif(motif)"
                    >
                    </ng-select>
                </div>
            </div>

            <div class="col-2 mb-1 form-group row">
                <label class="col-form-label col-sm-4">Qté</label>
                <div class="col-sm-8">
                    <input #quantyBox class="form-control mr-sm-1" type="number"
                           (keyup.enter)="onFilterTextBoxChanged($event)">
                </div>

            </div>
        </div>
        <hr>
        <div class="master">
            <h6><span>Produits ajustés</span>
            </h6>
            <div class="ag-theme-alpine st-editTable">
                <ag-grid-angular style="width: 100%;height:100%;" [rowData]="rowData"
                                 [columnDefs]="columnDefs"
                                 [defaultColDef]="defaultColDef"
                                 [frameworkComponents]="frameworkComponents"
                                 [context]="context"
                                 (cellValueChanged)="onCellValueChanged($event)">
                </ag-grid-angular>

            </div>
            <div class="row mt-2">
                <div class="col-7 mb-1 form-group row">
                    <label class="col-form-label col-sm-2">Commentaire:</label>
                    <div class="col-sm-10">
                        <input #comment class="form-control" type="text"
                               (keyup.enter)="onFilterTextBoxChanged($event)"></div>
                </div>
                <div class="col-5 ">
                    <span class="float-right">  <button (click)="save()" type="button" id="save-entity"
                                                        [disabled]="isSaving" class="btn btn-sm btn-primary">
                        <fa-icon icon="save"></fa-icon>&nbsp;<span>Valider</span>
                    </button>
                        <button type="button" id="cancel-save" class="btn btn-secondary btn-sm ml-2"
                                (click)="previousState()">
                            <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                        </button></span>
                </div>
            </div>
        </div>
    </div>

</div>
