<div class="titlebar" data-tauri-drag-region>
  <!-- App Icon and Title -->
  <div class="titlebar-left" data-tauri-drag-region>
    <div class="app-icon" data-tauri-drag-region>
      <svg height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12 2L2 7V17L12 22L22 17V7L12 2Z"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
        />
        <path d="M12 22V12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
              stroke-width="2" />
        <path d="M2 7L12 12L22 7" stroke="currentColor" stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2" />
      </svg>
    </div>
    <span class="app-title" data-tauri-drag-region>{{ title }}</span>
    <span class="route-divider" data-tauri-drag-region>-</span>
    <span class="current-route" data-tauri-drag-region>{{ currentRoute }}</span>
  </div>

  <!-- Titlebar Actions -->
  <div class="titlebar-center">
    <button (click)="openNewInstance()" class="titlebar-action-button new-instance"
            title="Nouvelle fenêtre" type="button">
      <svg height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
        <rect height="18" rx="2" stroke="currentColor" stroke-width="2" width="18" x="3" y="3" />
        <line stroke="currentColor" stroke-linecap="round" stroke-width="2" x1="12" x2="12" y1="8"
              y2="16" />
        <line stroke="currentColor" stroke-linecap="round" stroke-width="2" x1="8" x2="16" y1="12"
              y2="12" />
      </svg>
    </button>
  </div>

  <!-- Window Controls -->
  <div class="titlebar-right">
    <button (click)="minimizeWindow()" class="titlebar-button minimize" title="Réduire"
            type="button">
      <svg height="12" viewBox="0 0 12 12" width="12">
        <rect height="1" width="10" x="1" y="6" />
      </svg>
    </button>

    <button (click)="maximizeWindow()" [title]="isMaximized ? 'Restaurer' : 'Agrandir'"
            class="titlebar-button maximize" type="button">
      @if (!isMaximized) {
        <svg height="12" viewBox="0 0 12 12" width="12">
          <rect height="9" stroke="currentColor" stroke-width="1" width="9" x="1.5" y="1.5" />
        </svg>
      }
      @if (isMaximized) {
        <svg height="12" viewBox="0 0 12 12" width="12">
          <rect height="7" stroke="currentColor" stroke-width="1" width="7" x="3" y="2" />
          <rect height="7" stroke="currentColor" stroke-width="1" width="7" x="2" y="3" />
        </svg>
      }
    </button>

    <button (click)="closeWindow()" class="titlebar-button close" title="Fermer" type="button">
      <svg height="12" viewBox="0 0 12 12" width="12">
        <path d="M1 1 L11 11 M11 1 L1 11" stroke="currentColor" stroke-linecap="round"
              stroke-width="1.5" />
      </svg>
    </button>
  </div>
</div>

