<div class="container-fluid">
  <div class=" justify-content-center">
    <p-toolbar>
      <div style="width: 100%">
        <p-button
          (click)="previousState()"
          class="float-right"
          icon="pi pi-angle-double-left"
          label="Retour"
          severity="secondary"
        ></p-button>
      </div>
    </p-toolbar>
    <div class="mt-2">
      <p-pickList
        (onMoveAllToSource)="moveAllToSource($event)"
        (onMoveAllToTarget)="moveAllToTarget($event)"
        (onMoveToSource)="moveToSource($event)"
        (onMoveToTarget)="moveToTarget($event)"
        [dragdrop]="true"
        [responsive]="true"
        [scrollHeight]="scrollHeight"
        [showSourceControls]="false"
        [showTargetControls]="false"
        [sourceStyle]="{ height: '90rem' }"
        [source]="produitsSource"
        [stripedRows]="true"
        [target]="produitsTarget"
        [trackBy]="trackId"
        breakpoint="1400px"
        filterBy="libelle"
        sourceFilterPlaceholder="Taper pour rechercher"
        sourceHeader="Produits non associés à ce tableau"
        targetFilterPlaceholder="Taper pour rechercher"
        targetHeader="Produits associés"
      >
        <ng-template #sourceFilter let-options="options">
          <div>
            <input (keyup.enter)="onSourceFilter()"
                   [(ngModel)]="searchSource"
                   [style]="{ width: '30rem' }"
                   class="p-inputtext p-component p-listbox-filter p-filled"
                   pInputText
                   role="textbox"
                   type="text"
            />
            @if (searchSource) {
              <span (click)="searchSource = ''; onSourceFilter()"
                    class="p-picklist-filter-icon pi pi-times"> </span>
            }
          </div>
        </ng-template>

        <ng-template #targetFilter let-options="options">
          <div>
            <input
              (keyup.enter)="onTargetFilter()"
              [(ngModel)]="searchTarget"
              [style]="{ width: '30rem' }"
              class="p-inputtext p-component p-listbox-filter p-filled"
              pInputText
              role="textbox"
              type="text"
            />
            @if (searchTarget) {
              <span (click)="searchTarget = ''; onTargetFilter()"
                    class="p-picklist-filter-icon pi pi-times"> </span>
            }
          </div>
        </ng-template>

        <ng-template #item let-index="index" let-item>
          <div style="width: 100%">
          <span
            style="width: 18%; display: inline-block">{{ item.fournisseurProduit?.codeCip }}</span
          ><span> {{ item.libelle }}</span>
            <span class="float-right font-bold text-900">{{ item.unitPrice | number }}</span>
          </div>
        </ng-template>
      </p-pickList>
    </div>

  </div>
</div>

