<jhi-toast-alert #alert></jhi-toast-alert>
<div class="modal-header">
  <h4 class="modal-title">{{ header }}</h4>
  <button (click)="cancel()" aria-label="Close" class="btn-close" type="button"></button>
</div>

<form (ngSubmit)="save()" [formGroup]="editForm" name="editForm" novalidate role="form">
  <div class="modal-body">
    <p-card>
      <div class="p-col-12">
        <div [hidden]="!editForm.get('name')!.value" class="form-group">
          <input class="form-control" formControlName="name" id="name" name="name" readonly type="hidden" />
        </div>
        <div class="p-fluid p-formgrid p-grid">
          <label class="form-label" for="field_libelle">Description</label>
          <div class="p-field p-col" style="margin-bottom: 10px">
            <textarea
              class="form-control"
              formControlName="description"
              id="field_libelle"
              name="description"
              pTextarea
              style="width: 100%"
            >
            </textarea>
          </div>
          @if (editForm.get('description')!.invalid && (editForm.get('description')!.dirty || editForm.get('description')!.touched)) {
            <div>
              @if (editForm.get('description')?.errors?.required) {
                <small class="form-text text-danger" style="color: red"> Ce champ est obligatoire. </small>
              }
            </div>
          }
        </div>
        <div class="p-fluid p-formgrid p-grid">
          <div class="p-field p-col" style="margin-bottom: 10px">
            @if (entity?.valueType === 'BOOLEAN') {
              <!-- <label class="me-4 form-label" for="field_value" >Actif</label>
                 <p-toggleswitch id="field_value" formControlName="value" /> -->
              <p-checkbox [hidden]="true" formControlName="value" [binary]="true" inputId="binary" />
            } @else if (entity?.valueType === 'NUMBER') {
              <label for="field_value" class="form-label">Valeur</label>
              <input pInputText class="form-control" pKeyFilter="int" formControlName="value" id="field_value" name="value" />
            } @else {
              <label for="field_value" class="form-label">Valeur</label>
              <input
                pInputText
                class="form-control"
                type="text"
                formControlName="value"
                id="field_value"
                name="value"
                style="width: 100%"
              />
            }
          </div>
          @if (editForm.get('value')!.invalid && (editForm.get('value')!.dirty || editForm.get('value')!.touched)) {
            <div>
              @if (editForm.get('value')?.errors?.required) {
                <small class="form-text text-danger" style="color: red"> Ce champ est obligatoire. </small>
              }
            </div>
          }
        </div>
      </div>
    </p-card>
  </div>
  <div class="modal-footer">
    <p-button (click)="cancel()" class="mr-2" icon="pi pi-times" label="Annuler" severity="secondary" type="button"></p-button>
    <p-button
      [disabled]="editForm.invalid || isSaving"
      icon="pi pi-check"
      label="Enregistrer"
      raised="true"
      severity="primary"
      type="submit"
    ></p-button>
  </div>
</form>
