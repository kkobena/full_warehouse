<div class="container-fluid">
  <div class="pharma-smart-content p-2">
    <div class="pharma-toolbar">
      <div class="pharma-toolbar-header">
        <i class="pi pi-cog"></i>
        <span class="pharma-toolbar-title">Paramètres de configuaration</span>
      </div>

      <p-toolbar>
        <ng-template #start>
          <div class="pharma-toolbar-filters">
            <div class="pharma-search-input">
              <p-iconfield>
                <p-inputicon class="pi pi-search" />
                <input (keyup.enter)="loadAll()" [(ngModel)]="search" pInputText
                       placeholder="Taper pour rechercher" type="text" />
              </p-iconfield>
            </div>
          </div>
        </ng-template>

        <ng-template #end>
          <div class="pharma-toolbar-actions">
            <div class="pharma-button-group">
            </div>
          </div>
        </ng-template>
      </p-toolbar>
    </div>

    @if (apps.length > 0) {
      <div class="table-responsive mt-2">
        <table class="table table-striped">
          <thead class="pharma-table-head">
          <tr>
            <th>Nom</th>
            <th>description</th>
            <th>Valeur</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
            @for (app of apps; track app.name) {
              <tr>
                <td>{{ app.name }}</td>
                <td>{{ app.description }}</td>
                @if (app.valueType === 'BOOLEAN') {
                  <td>
                    @if (app.name !== 'APP_GESTION_STOCK') {
                      @if (app.value == 0) {
                        <p-button (click)="setActive(app, true)" label="Désactivé" raised="true"
                                  severity="danger"
                                  size="small">

                        </p-button>
                      } @else {
                        <p-button (click)="setActive(app, false)" label="Activé" raised="true"
                                  severity="primary"
                                  size="small">

                        </p-button>
                      }
                    }
                  </td>
                } @else {
                  <td>{{ app.value }}</td>
                }
                <td>
                  @if (app.name !== 'APP_GESTION_STOCK') {
                    <p-button (click)="onEdit(app)" icon="pi pi-pencil" label="Modifier"
                              raised="true"
                              severity="info"
                              size="small"></p-button>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
</div>

