<div>
  <h2>
    <span data-cy="healthPageHeading" id="health-page-heading" jhiTranslate="health.title">Diagnostics</span>

    <button (click)="refresh()" class="btn btn-primary float-end">
      <fa-icon icon="sync"></fa-icon>
      <span jhiTranslate="health.refresh.button">Rafraîchir</span>
    </button>
  </h2>

  <div class="table-responsive">
    <table aria-describedby="health-page-heading" class="table table-striped" id="healthCheck">
      <thead>
      <tr>
        <th jhiTranslate="health.table.service" scope="col">Nom du service</th>
        <th class="text-center" jhiTranslate="health.table.status" scope="col">État</th>
        <th class="text-center" jhiTranslate="health.details.details" scope="col">Détails</th>
      </tr>
      </thead>
      <tbody *ngIf="health">
      <tr *ngFor="let componentHealth of health.components | keyvalue">
        <td>
          {{ 'health.indicator.' + componentHealth.key | translate }}
        </td>
        <td class="text-center">
            <span
              [ngClass]="getBadgeClass(componentHealth.value!.status)"
              class="badge"
              jhiTranslate="{{ 'health.status.' + componentHealth.value!.status }}"
            >
              {{
              {
                UNKNOWN: 'INCONNU',
                UP: 'DISPONIBLE',
                OUT_OF_SERVICE: 'OUT_OF_SERVICE',
                DOWN: 'HORS SERVICE'
              }[
              componentHealth.value!.status || 'UNKNOWN'
                ]
              }}
            </span>
        </td>
        <td class="text-center">
          <a
            (click)="showHealth({ key: componentHealth.key, value: componentHealth.value! })"
            *ngIf="componentHealth.value!.details"
            class="hand"
          >
            <fa-icon icon="eye"></fa-icon>
          </a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
