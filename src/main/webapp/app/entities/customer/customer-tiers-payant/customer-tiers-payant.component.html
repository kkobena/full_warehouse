<p-toast position="center"></p-toast>

<form (ngSubmit)="save()" [formGroup]="editForm" name="editForm">
  <div class="modal-body">
    <div [hidden]="true" class="form-group">
      <input class="form-control" formControlName="id" id="id" name="id" readonly type="hidden" />

    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label class="form-control-label"
               for="tiersPayant">Tiers-payant<span
          style="font-weight: 900;color: red;">*</span></label>

        <p-autoComplete (completeMethod)="searchTiersPayant($event)"

                        [dropdown]="true"
                        [forceSelection]="true"
                        [inputStyle]="{'width':'100%'}"
                        [minLength]="minLength"
                        [style]="{'width':'100%'}" [suggestions]="tiersPayants"
                        appendTo="body" formControlName="tiersPayant"
                        id="tiersPayant"
                        optionLabel="fullName"
                        placeholder="Taper pour rechercher">
        </p-autoComplete>


        @if (editForm.get('tiersPayant')!.invalid && (editForm.get('tiersPayant')!.dirty
          || editForm.get('tiersPayant')!.touched)) {
          <div>
            @if (editForm.get('tiersPayant')?.errors?.required) {
              <small class="form-text text-danger"
                     jhiTranslate="entity.validation.required">
                This field is required.
              </small>
            }

          </div>
        }

      </div>


      <div class="form-group col-md-6">
        <label class="form-control-label" for="field_num">Num√©ro<span
          style="font-weight: 900;color: red;">*</span> </label>
        <input autocomplete="off" class="form-control" formControlName="num" id="field_num"
               name="num"
               pInputText type="text" />
        @if (editForm.get('num')!.invalid && (editForm.get('num')!.dirty
          || editForm.get('num')!.touched)) {
          <div>
            @if (editForm.get('num')?.errors?.required) {
              <small class="form-text text-danger"
                     jhiTranslate="entity.validation.required">
                This field is required.
              </small>
            }

          </div>
        }
      </div>


    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label class="form-control-label"
               for="field_taux">Taux<span style="font-weight: 900;color: red;">*</span></label>
        <input autocomplete="off" class="form-control" formControlName="taux" id="field_taux"
               name="taux"
               pInputText
               pKeyFilter="int" type="text" />
        @if (editForm.get('taux')!.invalid && (editForm.get('taux')!.dirty
          || editForm.get('taux')!.touched)) {
          <div>
            @if (editForm.get('taux')?.errors?.required) {
              <small class="form-text text-danger"
                     jhiTranslate="entity.validation.required">
                This field is required.
              </small>
            }

          </div>
        }

      </div>
      <div class="form-group col-md-6">
        <label class="form-control-label"
               for="plafondJournalier">Plafond de vente</label>
        <input autocomplete="off" class="form-control" formControlName="plafondJournalier"
               id="plafondJournalier" name="plafondJournalier"
               pInputText
               pKeyFilter="int" type="text" />
      </div>

    </div>
    <div class="form-row">
      <div class="form-group col-md-7">
        <label class="form-control-label"
               for="plafondConso">Plafond consommation</label>
        <input autocomplete="off" class="form-control" formControlName="plafondConso"
               id="plafondConso" name="plafondConso"
               pInputText
               pKeyFilter="int" type="text" />
      </div>
      <div class="form-group col-md-5">
        <label class="form-control-label">Le plofond est-il absolu ?</label>

        <p-selectButton [options]="plafonds" formControlName="plafondAbsolu" optionLabel="label"
                        optionValue="value"></p-selectButton>
      </div>


    </div>


  </div>

  <div class="modal-footer">
    <button (click)="cancel()" class="btn btn-secondary" data-dismiss="modal" type="button">
      <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
    </button>

    <button [disabled]="editForm.invalid || isSaving || !isValid" class="btn btn-primary"
            id="save-entity"
            type="submit">
      <fa-icon icon="times"></fa-icon>&nbsp;<span>Enregistrer</span>
    </button>
  </div>
</form>


